<h1>CMData</h1>
<section class="search">
  <form id="search-form">
    <input id="search-input" autocomplete="off" placeholder="Wat is je vraag?" />
    <button type="submit">Verstuur</button>
  </form>
  <ul id="messages">
    <li class="assistant">Waarmee kan ik je helpen?</li>
  </ul>
</section>
<section class="filters">
  <form method="GET" action="/">
    <% Object.entries(filters).forEach(([veld, opties])=> { %>
      <fieldset>
        <legend>
          <%= veld %>
        </legend>
        <% opties.forEach(optie=> {
          const checkedValues = Array.isArray(query[veld]) ? query[veld] : (query[veld] ? [query[veld]] : []);
          const isChecked = checkedValues.includes(optie);
          %>
          <label>
            <input type="checkbox" name="<%= veld %>" value="<%= optie %>" <%=isChecked ? "checked" : "" %>>
            <%= optie %>
          </label>
          <% }) %>
      </fieldset>
      <% }) %>
        <button type="submit">Filteren</button>
  </form>
</section>
<section class="card-box">
  <% if (results.length> 0) { %>
    <ul>
      <% results.forEach(result=> { %>
        <li>
          <a href="/item/<%= result.id %>">
            <%= result.naam %>
          </a>
          <p>
            <%= result.ondertitel %>
          </p>
        </li>
        <% }) %>
    </ul>
    <% } else if (query) { %>
      <p>Geen resultaten gevonden.</p>
      <% } %>
</section>